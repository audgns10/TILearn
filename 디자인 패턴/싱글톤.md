# 디자인 패턴 --> singleton

## 싱글톤 패턴이란

* *프로그램 시작과 종료까지 클래스의 인스턴스를 단 한 번만 생성하여 사용하는 패턴능 의미한다. 그리고 프로그램 전역에서, 이 인스턴스를 공유하며 사용할 수 있게끔 하는 것이다*

<br>

* 사용하는 이유
    * 자주 사용되고 일관된, 정해진 동작을 하는 것이라면 싱글톤 패턴으로 구현하는 게 효율적이다 -> 같은 동작을 하는데 계속해서 메모리에 할당하고 해제하며 인스턴스를 사용하기보다는 이미 생성해둔 인스턴스를 사용하는게 더 효율이 맞기 때문이다
    * 고정된 메모리로 필요 없는 메모리 낭비를 방지
    * 데이터 공유도 쉬움

![텍스트](https://velog.velcdn.com/images%2Fhaero_kim%2Fpost%2Fe6f8a175-71ce-472f-9860-7bf42a465d6a%2F%E1%84%89%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A1%E1%84%8B%E1%85%B5%E1%84%83%E1%85%B31.png)

<br>

* 활용(예시)
    * 안드로이드
        * 서버와 네트워킹을 하여 데이터를 주고 받기 위해서는 HTTP 통신을 수행하는 객체를 생성하여 사용해야 한다.
        * 예를 들어 Retrofit(HTTP 통신에 가장 많이 쓰이는 라이브러리 / 쉬게 HTTP 메소드를 호출할 수 있도록 도와줌)를 예로 들면 서버의 API를 호출 할 때, Retrofit 객체를 생성하여 이를 수행하면 매우 편리

        ![텍스트](https://velog.velcdn.com/images%2Fhaero_kim%2Fpost%2Ff41af8c3-5be9-411b-80fe-55b854a5e956%2F%E1%84%89%E1%85%B5%E1%86%BC%E1%84%80%E1%85%B3%E1%86%AF%E1%84%90%E1%85%A9%E1%86%AB.png)

        ![텍스트](https://velog.velcdn.com/images%2Fhaero_kim%2Fpost%2Fac347ff1-5578-43ea-b360-87542fb2a7a4%2F%E1%84%89%E1%85%B5%E1%86%BC%E1%84%80%E1%85%B3%E1%86%AF%E1%84%90%E1%85%A9%E1%86%AB_%E1%84%85%E1%85%A6%E1%84%90%E1%85%B3%E1%84%85%E1%85%A9%E1%84%91%E1%85%B5%E1%86%BA.png)

        * 가장 첫번째 사진을 보면 중복된 동작을 하는 개체가 3번 생성이 되서 메모리가 낭비되는 모습을 볼 수 있다 -> 굳이 이럴 필요가 없다. 이럴 때 필요한 것이 바로 싱글톤 패턴이다

        * 두 번째 사진을 보면 최초로 한 번 생성해둔 Retrofit 객체를 사용하면 어떤 페이지에서든 이를 활용하여 네트워킹 호출을 할 수 있다 -> 메모리 면에서 훨씬 효율을 취하고 있다

<br>

* 코틀린으로 구현
    ```kt
    object SingletonObj {
        
    }
    ```
    * object로 클래스를 정의하게 되면, 클래스를 정의하는 동시에 인스턴스를 생성한다 -> 이때 무조건 단일 인스턴스 생성을 보장한다
    * 위 클래스 안에 필요한 객체(Retrofit), 메소드 등을 정의해두면 프로그램 전역에서 이를 활용할 수 있다

<br>

* 싱글톤 사용시 주의할 점
    * 싱글톤 객체가 하는 일이 방대하거나, 많은 데이터를 공유하게 된다면 본의 아니게 이를 사용하는 클래스들과는 결합도가 높아지기 때문에, 개방 폐쇄 원칙을 위반하게 된다